<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>Ø­Ø³Ø§Ø¨ Ø§Ù„Ø®Ø²Ø§Ø¦Ù† ÙˆØ§Ù„Ø­Ù„Ù‚ Ù…Ø¹ Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù†ØªØ§Ø¦Ø¬</title>
<style>
body { font-family: "Tahoma", sans-serif; direction: rtl; margin: 20px; }
h2 { color: #333; }
.container { display: flex; gap: 20px; flex-wrap: wrap; }
.section { border: 1px solid #aaa; padding: 15px; border-radius: 8px; width: 48%; min-width: 300px;}
label { display: block; margin-top: 10px; }
input { width: 100px; margin-top: 5px; }
button { margin-top: 10px; padding: 5px 15px; cursor: pointer; }
.results { margin-top: 20px; background: #f9f9f9; padding: 15px; border-radius: 8px; overflow-x:auto; }
table { border-collapse: collapse; width: 100%; margin-top: 10px; }
th, td { border: 1px solid #aaa; padding: 6px; text-align: center; }
th { background: #f0f0f0; }
.divider-row { display: flex; gap: 5px; align-items: center; margin-top:5px; }
.divider-row input, .divider-row select { width: 60px; }
.remove-btn { background:#e03131;color:#fff;border:0;border-radius:4px;padding:2px 6px;cursor:pointer; }
</style>
</head>
<body>

<h2>ğŸ“ Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø­Ø³Ø§Ø¨ Ø§Ù„Ø®Ø²Ø§Ø¦Ù† ÙˆØ§Ù„Ø­Ù„Ù‚ Ù…Ø¹ Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù†ØªØ§Ø¦Ø¬</h2>

<div class="container">
  <!-- Ø®Ø²Ø§Ù†Ø© -->
  <div class="section">
    <h3>â• Ø¥Ø¶Ø§ÙØ© Ø®Ø²Ø§Ù†Ø©</h3>
    <label>Ø§Ù„Ø¹Ø±Ø¶ (Ø³Ù…): <input type="number" id="cabWidth"></label>
    <label>Ø§Ù„Ø§Ø±ØªÙØ§Ø¹ (Ø³Ù…): <input type="number" id="cabHeight"></label>
    <label>Ø§Ù„Ø¹Ù…Ù‚ (Ø³Ù…): <input type="number" id="cabDepth"></label>
    <label>Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø¨ÙˆØ§Ø¨:
      <select id="cabDoors">
        <option value="1">Ø¨Ø§Ø¨ ÙˆØ§Ø­Ø¯</option>
        <option value="2">Ø¨Ø§Ø¨Ø§Ù†</option>
      </select>
    </label>
    <button onclick="addCabinet()">Ø¥Ø¶Ø§ÙØ© Ø®Ø²Ø§Ù†Ø©</button>
  </div>

  <!-- Ø­Ù„Ù‚ -->
  <div class="section">
    <h3>â• Ø¥Ø¶Ø§ÙØ© Ø­Ù„Ù‚ Ø³ÙÙ„ÙŠ</h3>
    <label>Ø§Ù„Ø¹Ø±Ø¶ (Ø³Ù…): <input type="number" id="frameWidth"></label>
    <label>Ø§Ù„Ø§Ø±ØªÙØ§Ø¹ (Ø³Ù…): <input type="number" id="frameHeight"></label>
    <div id="dividersContainer"></div>
    <button onclick="addDivider()">â• Ø¥Ø¶Ø§ÙØ© Ù‚Ø§Ø·Ø¹</button>
    <button onclick="addFrame()">Ø¥Ø¶Ø§ÙØ© Ø­Ù„Ù‚</button>
  </div>
</div>

<div class="results" id="results">
  <h3>ğŸ“Š Ø§Ù„Ù†ØªØ§Ø¦Ø¬:</h3>
</div>

<div style="margin-top: 15px;">
  <button onclick="showSummary()">ğŸ“ Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù„Ø®Øµ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ</button>
  <button onclick="window.print()">ğŸ–¨ï¸ Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ù†ØªØ§Ø¦Ø¬</button>
</div>

<script>
let resultsDiv = document.getElementById("results");
let summary = {doors:0, hinges:0, handles:0, corners:0};
let dividerIndex = 0;

// Ø¥Ø¶Ø§ÙØ© Ø®Ø²Ø§Ù†Ø©
function addCabinet() {
  let wMain = parseFloat(document.getElementById("cabWidth").value);
  let hMain = parseFloat(document.getElementById("cabHeight").value);
  let dMain = parseFloat(document.getElementById("cabDepth").value);
  let doors = parseInt(document.getElementById("cabDoors").value);

  if (wMain<=0 || hMain<=0 || dMain<=0){ alert("âŒ Ø£Ø¯Ø®Ù„ Ù‚ÙŠØ§Ø³Ø§Øª ØµØ­ÙŠØ­Ø© Ù„Ù„Ø®Ø²Ø§Ù†Ø©"); return; }

  let w = wMain - 5, h = hMain -5, d = dMain -5;
  let cabCorners=0;
  let doorRows = [];
  if(doors===1){
    let doorW = wMain -3, doorH = hMain -2.5;
    doorRows.push({width:doorW,height:doorH,doors:1,hinges:2,handles:1,corners:4});
    cabCorners=4;
  } else {
    let doorW = (wMain -4)/2, doorH = hMain -2.5;
    doorRows.push({width:doorW,height:doorH,doors:2,hinges:4,handles:2,corners:8});
    cabCorners=8;
  }

  summary.doors += doorRows.reduce((s,r)=>s+r.doors,0);
  summary.hinges += doorRows.reduce((s,r)=>s+r.hinges,0);
  summary.handles += doorRows.reduce((s,r)=>s+r.handles,0);
  summary.corners += cabCorners;

  let table = `<table>
  <tr><th colspan="2">ğŸ—„ï¸ Ø®Ø²Ø§Ù†Ø©</th></tr>
  <tr><td>Ø§Ù„Ø¨Ø±ÙˆÙÙŠÙ„Ø§Øª</td><td>
    Ø§Ø±ØªÙØ§Ø¹: 2Ã—${h} (Ø¨Ø³Ù†ÙŠÙ†) + 2Ã—${h} (Ø¨Ø³Ù† ÙˆØ§Ø­Ø¯)<br>
    Ø¹Ø±Ø¶: 2Ã—${w} (Ø¨Ø³Ù†ÙŠÙ†) + 2Ã—${w} (Ø¨Ø³Ù† ÙˆØ§Ø­Ø¯)<br>
    Ø¹Ù…Ù‚: 4Ã—${d} (Ø¨Ø³Ù†ÙŠÙ†)
  </td></tr>
  <tr><th>Ø§Ù„Ø£Ø¨ÙˆØ§Ø¨</th><th>Ø§Ù„Ù‚ÙŠØ§Ø³Ø§Øª / Ø¹Ø¯Ø¯ Ø§Ù„ÙØµØ§Ù„Ø§Øª / Ø§Ù„Ø£ÙŠØ¯ÙŠ / Ø§Ù„Ø²ÙˆØ§ÙŠØ§</th></tr>`;

  doorRows.forEach((r,i)=>{
    table+=`<tr><td>Ø¨Ø§Ø¨ ${i+1}</td><td>${r.width}Ã—${r.height} â€” ÙØµØ§Ù„Ø§Øª ${r.hinges} / ÙŠØ¯ ${r.handles} â€” Ø²ÙˆØ§ÙŠØ§ ${r.corners}</td></tr>`;
  });

  table+=`</table>`;
  resultsDiv.innerHTML += table;
}

// Ø¥Ø¶Ø§ÙØ© Ù‚Ø§Ø·Ø¹
function addDivider() {
  dividerIndex++;
  const container = document.getElementById("dividersContainer");
  const row = document.createElement("div");
  row.className="divider-row";
  row.dataset.index=dividerIndex;
  row.innerHTML = `
    Ù…Ø³Ø§ÙØ© (Ø³Ù…): <input type="number" class="dividerDistance" value="0">
    Ø¹Ø¯Ø¯ Ø£Ø¨ÙˆØ§Ø¨: <select class="dividerDoors"><option value="1">1</option><option value="2">2</option></select>
    <button class="remove-btn" onclick="this.parentElement.remove()">Ã—</button>
  `;
  container.appendChild(row);
}

// Ø¥Ø¶Ø§ÙØ© Ø­Ù„Ù‚
function addFrame() {
  let w = parseFloat(document.getElementById("frameWidth").value);
  let h = parseFloat(document.getElementById("frameHeight").value);
  if(w<=0||h<=0){alert("âŒ Ø£Ø¯Ø®Ù„ Ù‚ÙŠØ§Ø³Ø§Øª ØµØ­ÙŠØ­Ø© Ù„Ù„Ø­Ù„Ù‚"); return;}

  const divRows = Array.from(document.querySelectorAll("#dividersContainer .divider-row"));
  const N = divRows.length;
  const innerAvailable = w - N*2.7; // Ø®ØµÙ… Ø¹Ø±Ø¶ Ø§Ù„Ù‚ÙˆØ§Ø·Ø¹
  let distances = divRows.map(r=>parseFloat(r.querySelector(".dividerDistance").value)||0);
  let distancesSum = distances.reduce((s,x)=>s+x,0);

  let table = `<table><tr><th colspan="2">ğŸšª Ø­Ù„Ù‚ Ø³ÙÙ„ÙŠ</th></tr>
               <tr><td>Ø§Ù„Ø£Ø¨Ø¹Ø§Ø¯</td><td>Ø¹Ø±Ø¶ ${w} Ã— Ø§Ø±ØªÙØ§Ø¹ ${h}</td></tr>
               <tr><th>Ø§Ù„Ù…Ù‚Ø·Ø¹</th><th>Ù‚ÙŠØ§Ø³Ø§Øª / ÙØµØ§Ù„Ø§Øª / Ø§Ù„Ø£ÙŠØ¯ÙŠ / Ø§Ù„Ø²ÙˆØ§ÙŠØ§</th></tr>`;

  if(distancesSum>innerAvailable){
    table+=`<tr><td colspan="2" style="color:red">Ø®Ø·Ø£: Ù…Ø¬Ù…ÙˆØ¹ Ù…Ø³Ø§ÙØ§Øª Ø§Ù„Ù‚ÙˆØ§Ø·Ø¹ (${distancesSum}) Ø£ÙƒØ¨Ø± Ù…Ù† Ø§Ù„Ù…Ø³Ø§Ø­Ø© Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠØ© Ø§Ù„Ù…ØªØ§Ø­Ø© (${innerAvailable})</td></tr>`;
  } else {
    const segments = distances.slice();
    segments.push(innerAvailable - distancesSum);
    segments.forEach((segWidth,idx)=>{
      const doorsCount = (idx<divRows.length)?parseInt(divRows[idx].querySelector(".dividerDoors").value):1;
      let doorW = (doorsCount===1)?segWidth-3:(segWidth-0)/doorsCount-2.5;
      let doorH = h-2.5;
      let corners = doorsCount===1?4:8;
      let hinges = doorsCount===1?2:4;
      let handles = doorsCount===1?1:2;

      summary.doors += doorsCount;
      summary.hinges += hinges;
      summary.handles += handles;
      summary.corners += corners;

      table+=`<tr><td>Ø§Ù„Ù…Ù‚Ø·Ø¹ ${idx+1}</td><td>${doorW.toFixed(2)} Ã— ${doorH} â€” ÙØµØ§Ù„Ø§Øª ${hinges} / ÙŠØ¯ ${handles} â€” Ø²ÙˆØ§ÙŠØ§ ${corners}</td></tr>`;
    });
  }

  table+=`</table>`;
  resultsDiv.innerHTML += table;

  document.getElementById("dividersContainer").innerHTML="";
  dividerIndex=0;
}

// Ø§Ù„Ù…Ù„Ø®Øµ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ
function showSummary(){
  let table = `<table>
  <tr><th>Ù…Ù„Ø®Øµ</th><th>Ø§Ù„Ù‚ÙŠÙ…Ø©</th></tr>
  <tr><td>Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ø£Ø¨ÙˆØ§Ø¨</td><td>${summary.doors}</td></tr>
  <tr><td>Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙØµØ§Ù„Ø§Øª</td><td>${summary.hinges}</td></tr>
  <tr><td>Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ø£ÙŠØ¯ÙŠ</td><td>${summary.handles}</td></tr>
  <tr><td>Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ø²ÙˆØ§ÙŠØ§</td><td>${summary.corners}</td></tr>
  </table>`;
  resultsDiv.innerHTML += table;
}
</script>

</body>
</html>
