<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>ุญุงุณุจุฉ ุงูุฎุฒุงุฆู ูุงูุญูู ุงูุณููู ูุน ุงููููุงููู</title>
<style>
body { font-family: "Tahoma", sans-serif; margin: 20px; }
h2 { color: #333; }
.container { display: flex; gap: 20px; flex-wrap: wrap; }
.section { border: 1px solid #aaa; padding: 15px; border-radius: 8px; width: 48%; min-width: 300px; }
label { display: block; margin-top: 10px; }
input, select { margin-top: 5px; width: 100px; }
button { margin-top: 15px; padding: 5px 15px; cursor: pointer; }
.results { margin-top: 20px; background: #f9f9f9; padding: 15px; border-radius: 8px; }
.item { margin-bottom: 15px; padding-bottom: 10px; border-bottom: 1px dashed #ccc; }
.divider-row { display:flex; gap:5px; margin-top:5px; align-items:center;}
</style>
</head>
<body>

<h2>๐ ุจุฑูุงูุฌ ุญุณุงุจ ุงูุฎุฒุงุฆู ูุงูุญูู ุงูุณููู ูุน ุงููููุงููู</h2>

<div class="container">
  <div class="section">
    <h3>โ ุฅุถุงูุฉ ุฎุฒุงูุฉ</h3>
    <label>ุงูุนุฑุถ (ุณู): <input type="number" id="cabWidth"></label>
    <label>ุงูุงุฑุชูุงุน (ุณู): <input type="number" id="cabHeight"></label>
    <label>ุงูุนูู (ุณู): <input type="number" id="cabDepth"></label>
    <label>ุนุฏุฏ ุงูุฃุจูุงุจ:
      <select id="cabDoors">
        <option value="1">ุจุงุจ ูุงุญุฏ</option>
        <option value="2">ุจุงุจุงู</option>
      </select>
    </label>
    <button onclick="addCabinet()">ุฅุถุงูุฉ ุฎุฒุงูุฉ</button>
  </div>

  <div class="section">
    <h3>โ ุฅุถุงูุฉ ุญูู ุณููู</h3>
    <label>ุงูุนุฑุถ (ุณู): <input type="number" id="frameWidth"></label>
    <label>ุงูุงุฑุชูุงุน (ุณู): <input type="number" id="frameHeight"></label>
    <div id="dividerContainer"></div>
    <button onclick="addDividerRow()">โ ุฅุถุงูุฉ ูุงุทุน</button>
    <button onclick="addFrame()">ุฅุถุงูุฉ ุญูู</button>
  </div>
</div>

<div class="results" id="results">
<h3>๐ ุงููุชุงุฆุฌ:</h3>
</div>

<button onclick="printResults()">๐จ๏ธ ุทุจุงุนุฉ ุงููุชุงุฆุฌ</button>

<script>
const MELAMINE_DEDUCT = 5.2; // ุฎุตู ุงููููุงููู

let resultsDiv = document.getElementById("results");

// ุงูุฎุฒุงุฆู
function addCabinet() {
  let wMain = parseFloat(document.getElementById("cabWidth").value);
  let hMain = parseFloat(document.getElementById("cabHeight").value);
  let dMain = parseFloat(document.getElementById("cabDepth").value);
  let doors = parseInt(document.getElementById("cabDoors").value);

  if(wMain<=0||hMain<=0||dMain<=0){ alert("โ ุฃุฏุฎู ููุงุณุงุช ุตุญูุญุฉ ููุฎุฒุงูุฉ"); return; }

  // ุฃุจุนุงุฏ ุงูุจุฑููููุงุช
  let wProfile=wMain-5, hProfile=hMain-5, dProfile=dMain-5;

  // ุงููููุงููู
  let wMelamine = wMain - MELAMINE_DEDUCT;
  let hMelamine = hMain - MELAMINE_DEDUCT;
  let dMelamine = dMain - MELAMINE_DEDUCT;

  let item=document.createElement("div"); item.className="item";

  // ุงูุฃุจูุงุจ
  let doorHeight = (doors===1)?hMain-2.5:hMain-2.5;
  let doorWidth = (doors===1)?wMain-3:(wMain-4)/2;
  let doorCount=(doors===1)?2:4;
  let hinges = doorCount*2;
  let handles = doorCount;
  let anglesCab = 8;
  let anglesDoor = doorCount*4;

  let doorDesc = (doors===1)?
    `ุจุงุจ ูุงุญุฏ: ${doorWidth} ร ${doorHeight} ุณู โ ูุตุงูุงุช 2 / ูุฏ 1 โ ุนุฏุฏ ูู ููุงุณ: ุนุฑุถ ${doorCount} ร ุงุฑุชูุงุน ${doorCount}`:
    `ุจุงุจุงู: ${doorWidth} ร ${doorHeight} ุณู ููู ุจุงุจ โ ูุตุงูุงุช 2 / ูุฏ 1 ููู ุจุงุจ โ ุนุฏุฏ ูู ููุงุณ: ุนุฑุถ 4 ร ุงุฑุชูุงุน 4`;

  // ุงููููุงููู ููุฎุฒุงูุฉ
  let melamineDesc = `
    <b>ูููุงููู ุงูุฎุฒุงูุฉ (ุฎุตู 5.2 ุณู):</b><br>
    ุนุฏุฏ: 2 ูุทุน ร ${wMelamine.toFixed(1)} ร ${dMelamine.toFixed(1)} ุณู<br>
    ุนุฏุฏ: 2 ูุทุน ร ${hMelamine.toFixed(1)} ร ${dMelamine.toFixed(1)} ุณู<br>
    ุนุฏุฏ: 1 ูุทุนุฉ ร ${wMelamine.toFixed(1)} ร ${hMelamine.toFixed(1)} ุณู
  `;

  // ุงููููุงููู ููุฃุจูุงุจ
  let melamineDoorWidth = doorWidth - 11;
  let melamineDoorHeight = doorHeight - 11;
  let melamineDoorDesc = `ูููุงููู ุงูุจุงุจ: ${melamineDoorWidth.toFixed(1)} ร ${melamineDoorHeight.toFixed(1)} ุณู ููู ุจุงุจ`;

  item.innerHTML = `
    <h4>๐๏ธ ุฎุฒุงูุฉ</h4>
    ุงูุฃุจุนุงุฏ ุจุนุฏ ุฎุตู ุงูุจุฑููููุงุช: ุนุฑุถ ${wProfile} ร ุงุฑุชูุงุน ${hProfile} ร ุนูู ${dProfile}<br>
    <b>ุชูุงุตูู ุงูุจุฑููููุงุช:</b><br>
    - ุงุฑุชูุงุน: 2 ร ${hProfile} ุณู (ุจุณููู) + 2 ร ${hProfile} ุณู (ุจุณู ูุงุญุฏ)<br>
    - ุนุฑุถ: 2 ร ${wProfile} ุณู (ุจุณููู) + 2 ร ${wProfile} ุณู (ุจุณู ูุงุญุฏ)<br>
    - ุนูู: 4 ร ${dProfile} ุณู (ุจุณููู)<br>
    <b>ุชูุงุตูู ุงูุฃุจูุงุจ:</b><br>${doorDesc}<br>
    ${melamineDesc}<br>
    ${melamineDoorDesc}<br>
    <div>ุนุฏุฏ ุงูุฒูุงูุง ููู ุฎุฒุงูุฉ: 8</div>
    <div>ุนุฏุฏ ุงูุฒูุงูุง ููู ุจุงุจ: 4</div>
    <div>ููุฎุต: ุงูุฃุจูุงุจ ${doorCount} โ ุงููุตุงูุงุช ${hinges} โ ุงูุฃูุฏู ${handles} โ ุงูุฒูุงูุง ุฎุฒุงูุฉ ${anglesCab} / ุฃุจูุงุจ ${anglesDoor}</div>
  `;

  resultsDiv.appendChild(item);
}

// ุงูุญููุงุช ุงูุณููู
function addDividerRow(){
  let container=document.getElementById("dividerContainer");
  let row=document.createElement("div"); row.className="divider-row";
  row.innerHTML=`
    <input type="number" placeholder="ูุณุงูุฉ ุงููุงุทุน ูู ุงูุจุฏุงูุฉ" class="divPos">
    <select class="divDoors">
      <option value="1">1 ุจุงุจ</option>
      <option value="2">2 ุจุงุจ</option>
    </select>
    <button onclick="this.parentElement.remove()">ร ุญุฐู</button>
  `;
  container.appendChild(row);
}

function addFrame(){
  let w=parseFloat(document.getElementById("frameWidth").value);
  let h=parseFloat(document.getElementById("frameHeight").value);
  if(w<=0||h<=0){ alert("โ ุฃุฏุฎู ููุงุณุงุช ุตุญูุญุฉ"); return; }

  let rows=document.querySelectorAll(".divider-row");
  let dividers=[];
  rows.forEach(r=>{
    let pos=parseFloat(r.querySelector(".divPos").value);
    let doors=parseInt(r.querySelector(".divDoors").value);
    if(!isNaN(pos)&&pos>0) dividers.push({position:pos, doors:doors});
  });
  dividers.sort((a,b)=>a.position-b.position);

  let item=document.createElement("div"); item.className="item";
  let lastPos=0; let sectionDetails=""; let doorHeight=h-2.5;

  dividers.forEach((d,i)=>{
    let sectionWidth=d.position-lastPos-(i>0?2.7:0);
    // ุญุณุงุจ ุงุจุนุงุฏ ุงูุงุจูุงุจ ุจูุงุกู ุนูู ุงููุนุงุฏูุฉ
    let doorWidth = (d.doors===1)?sectionWidth-3:(sectionWidth-4)/2;
    let doorH = doorHeight;
    sectionDetails+=`ุงูููุทุน ${i+1}: ุนุฑุถ ${sectionWidth.toFixed(1)} ร ุงุฑุชูุงุน ${doorHeight.toFixed(1)} โ ุฃุจูุงุจ ${d.doors} โ ุนุฑุถ ุงูุจุงุจ ${doorWidth.toFixed(1)} ร ุงุฑุชูุงุน ุงูุจุงุจ ${doorH.toFixed(1)}<br>`;
    lastPos=d.position;
  });

  // ุงูููุทุน ุงูุฃุฎูุฑ ุจุนุฏ ุขุฎุฑ ูุงุทุน
  let remainingWidth=w-lastPos-(dividers.length>0?2.7:0);
  let lastDoors = 1; // ูุณูุญ ุจุชุญุฏูุฏู ูุงุญููุง ุงุฐุง ุฃุญุจุจุช
  let lastDoorWidth = (lastDoors===1)?remainingWidth-3:(remainingWidth-4)/2;
  sectionDetails+=`ุงูููุทุน ${dividers.length+1}: ุนุฑุถ ${remainingWidth.toFixed(1)} ร ุงุฑุชูุงุน ${doorHeight.toFixed(1)} โ ุฃุจูุงุจ ${lastDoors} โ ุนุฑุถ ุงูุจุงุจ ${lastDoorWidth.toFixed(1)} ร ุงุฑุชูุงุน ุงูุจุงุจ ${doorHeight.toFixed(1)}<br>`;

  let summary="ุนุฏุฏ ุงูููุงุทุน: "+dividers.length+" โ ";
  summary+="ูุณุงูุงุช ุงูููุงุทุน: ["+dividers.map(d=>d.position).join(", ")+"] โ ";
  summary+="ุนุฏุฏ ุฃุจูุงุจ ูู ููุทุน: ["+dividers.map(d=>d.doors).join(", ")+", "+lastDoors+"]";

  item.innerHTML=`
    <h4>๐ช ุญูู ุณููู</h4>
    ุงูุฃุจุนุงุฏ: ุนุฑุถ ${w} ร ุงุฑุชูุงุน ${h}<br>
    <b>ุชูุงุตูู ุงูููุงุทุน:</b><br>${sectionDetails}
    <div>${summary}</div>
  `;
  resultsDiv.appendChild(item);
  document.getElementById("dividerContainer").innerHTML="";
}

// ุทุจุงุนุฉ ุงููุชุงุฆุฌ ููุท
function printResults(){
  let content=document.getElementById("results").innerHTML;
  let myWindow=window.open("","Print","width=800,height=600");
  myWindow.document.write("<html><head><title>ูุชุงุฆุฌ ุงูุทุจุงุนุฉ</title></head><body>"+content+"</body></html>");
  myWindow.document.close(); myWindow.print();
}
</script>
</body>
</html>
