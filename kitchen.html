<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>ุญุงุณุจุฉ ุงูุฎุฒุงุฆู ูุงูุญูู ุงูุณููู</title>
<style>
body { font-family: "Tahoma", sans-serif; direction: rtl; margin: 20px; }
h2 { color: #333; }
.container { display: flex; gap: 20px; flex-wrap: wrap; }
.section { border: 1px solid #aaa; padding: 15px; border-radius: 8px; width: 48%; }
label { display: block; margin-top: 10px; }
input, select { margin-top: 5px; width: 100px; }
button { margin-top: 15px; padding: 5px 15px; cursor: pointer; }
.results { margin-top: 20px; background: #f9f9f9; padding: 15px; border-radius: 8px; }
.item { margin-bottom: 15px; padding-bottom: 10px; border-bottom: 1px dashed #ccc; }
.divider-row { display:flex; gap:5px; margin-top:5px; align-items:center;}
</style>
</head>
<body>

<h2>๐ ุจุฑูุงูุฌ ุญุณุงุจ ุงูุฎุฒุงุฆู ูุงูุญูู ุงูุณููู ูุน ุงููููุงููู ูุงูุฃุฏูุงุช</h2>

<div class="container">
  <div class="section">
    <h3>โ ุฅุถุงูุฉ ุฎุฒุงูุฉ</h3>
    <label>ุงูุนุฑุถ (ุณู): <input type="number" id="cabWidth"></label>
    <label>ุงูุงุฑุชูุงุน (ุณู): <input type="number" id="cabHeight"></label>
    <label>ุงูุนูู (ุณู): <input type="number" id="cabDepth"></label>
    <label>ุนุฏุฏ ุงูุฃุจูุงุจ:
      <select id="cabDoors">
        <option value="1">ุจุงุจ ูุงุญุฏ</option>
        <option value="2">ุจุงุจุงู</option>
      </select>
    </label>
    <button onclick="addCabinet()">ุฅุถุงูุฉ ุฎุฒุงูุฉ</button>
  </div>

  <div class="section">
    <h3>โ ุฅุถุงูุฉ ุญูู ุณููู</h3>
    <label>ุงูุนุฑุถ (ุณู): <input type="number" id="frameWidth"></label>
    <label>ุงูุงุฑุชูุงุน (ุณู): <input type="number" id="frameHeight"></label>
    <div id="dividerContainer"></div>
    <button onclick="addDividerRow()">โ ุฅุถุงูุฉ ูุงุทุน</button>
    <label>ุนุฏุฏ ุฃุจูุงุจ ุงูููุทุน ุงูุฃุฎูุฑ:
      <select id="lastSectionDoors">
        <option value="1">1 ุจุงุจ</option>
        <option value="2">2 ุจุงุจ</option>
      </select>
    </label>
    <button onclick="addFrame()">ุฅุถุงูุฉ ุญูู</button>
  </div>
</div>

<div class="results" id="results">
<h3>๐ ุงููุชุงุฆุฌ:</h3>
</div>

<button onclick="printResults()">๐จ๏ธ ุทุจุงุนุฉ ุงููุชุงุฆุฌ</button>

<script>
let resultsDiv = document.getElementById("results");

// ุงูุฎุฒุงุฆู
function addCabinet() {
  let wMain = parseFloat(document.getElementById("cabWidth").value);
  let hMain = parseFloat(document.getElementById("cabHeight").value);
  let dMain = parseFloat(document.getElementById("cabDepth").value);
  let doors = parseInt(document.getElementById("cabDoors").value);
  if(wMain<=0||hMain<=0||dMain<=0){ alert("โ ุฃุฏุฎู ููุงุณุงุช ุตุญูุญุฉ ููุฎุฒุงูุฉ"); return; }

  let w = wMain-5, h = hMain-5, d = dMain-5;
  let item=document.createElement("div"); item.className="item";

  let doorHeight = hMain-2.5;
  let doorWidth = (doors===1)?wMain-3:(wMain-4)/2;
  let doorCount=(doors===1)?2:4;

  let doorDesc = (doors===1)?
    `ุจุงุจ ูุงุญุฏ: ${doorWidth} ร ${doorHeight} ุณู โ ูุตุงูุงุช 2 / ูุฏ 1 โ ุนุฏุฏ ูู ููุงุณ: ุนุฑุถ ${doorCount} ร ุงุฑุชูุงุน ${doorCount} โ 4 ุฒูุงูุง ููู ุจุงุจ`:
    `ุจุงุจุงู: ${doorWidth} ร ${doorHeight} ุณู ููู ุจุงุจ โ ูุตุงูุงุช 2 / ูุฏ 1 ููู ุจุงุจ โ ุนุฏุฏ ูู ููุงุณ: ุนุฑุถ 4 ร ุงุฑุชูุงุน 4 โ 4 ุฒูุงูุง ููู ุจุงุจ`;

  let melamineCab = `
<b>ูููุงููู ุงูุฎุฒุงูุฉ:</b><br>
- ูุทุนุฉ 1 (ุนุฏุฏ 2): ${(w-5.2).toFixed(1)} ร ${(d-5.2).toFixed(1)} ุณู<br>
- ูุทุนุฉ 2 (ุนุฏุฏ 2): ${(h-5.2).toFixed(1)} ร ${(d-5.2).toFixed(1)} ุณู<br>
- ูุทุนุฉ 3 (ุนุฏุฏ 1): ${(w-5.2).toFixed(1)} ร ${(h-5.2).toFixed(1)} ุณู
`;

  let melamineDoor = `<b>ูููุงููู ุงูุฃุจูุงุจ:</b><br>`;
  if(doors===1){
    melamineDoor += `ุจุงุจ ูุงุญุฏ: ุนุฑุถ ${(doorWidth-11).toFixed(1)} ร ุงุฑุชูุงุน ${(doorHeight-11).toFixed(1)} ุณู`;
  } else {
    melamineDoor += `ุจุงุจุงู: ุนุฑุถ ${(doorWidth-11).toFixed(1)} ร ุงุฑุชูุงุน ${(doorHeight-11).toFixed(1)} ุณู ููู ุจุงุจ`;
  }

  item.innerHTML = `
    <h4>๐๏ธ ุฎุฒุงูุฉ</h4>
    ุงูุฃุจุนุงุฏ ุจุนุฏ ุฎุตู ุงูุจุฑููููุงุช: ุนุฑุถ ${w} ร ุงุฑุชูุงุน ${h} ร ุนูู ${d}<br>
    <b>ุชูุงุตูู ุงูุจุฑููููุงุช:</b><br>
    - ุงุฑุชูุงุน: 2 ร ${h} ุณู (ุจุณููู) + 2 ร ${h} ุณู (ุจุณู ูุงุญุฏ)<br>
    - ุนุฑุถ: 2 ร ${w} ุณู (ุจุณููู) + 2 ร ${w} ุณู (ุจุณู ูุงุญุฏ)<br>
    - ุนูู: 4 ร ${d} ุณู (ุจุณููู)<br>
    <b>ุชูุงุตูู ุงูุฃุจูุงุจ:</b><br>${doorDesc}<br>
    ${melamineCab}<br>
    ${melamineDoor}<br>
    <div>ุนุฏุฏ ุงูุฒูุงูุง ููู ุฎุฒุงูุฉ: 8</div>
    <div>ููุฎุต ุงูุฃุฏูุงุช: ุงูุฃุจูุงุจ ${doorCount} โ ูุตุงูุงุช ${doorCount*2} โ ุงูุฃูุฏู ${doorCount} โ ุงูุฒูุงูุง ${8 + doorCount*4}</div>
  `;
  resultsDiv.appendChild(item);
}

// ุงูุญููุงุช
function addDividerRow(){
  let container=document.getElementById("dividerContainer");
  let row=document.createElement("div"); row.className="divider-row";
  row.innerHTML=`
    <input type="number" placeholder="ูุณุงูุฉ ุงููุงุทุน ูู ุงูุจุฏุงูุฉ" class="divPos">
    <select class="divDoors">
      <option value="1">1 ุจุงุจ</option>
      <option value="2">2 ุจุงุจ</option>
    </select>
    <button onclick="this.parentElement.remove()">ร ุญุฐู</button>
  `;
  container.appendChild(row);
}

function addFrame(){
  let w=parseFloat(document.getElementById("frameWidth").value);
  let h=parseFloat(document.getElementById("frameHeight").value);
  if(w<=0||h<=0){ alert("โ ุฃุฏุฎู ููุงุณุงุช ุตุญูุญุฉ"); return; }

  let lastDoors = parseInt(document.getElementById("lastSectionDoors").value);

  let rows=document.querySelectorAll(".divider-row");
  let dividers=[];
  rows.forEach(r=>{
    let pos=parseFloat(r.querySelector(".divPos").value);
    let doors=parseInt(r.querySelector(".divDoors").value);
    if(!isNaN(pos)&&pos>0) dividers.push({position:pos, doors:doors});
  });
  dividers.sort((a,b)=>a.position-b.position);

  let item=document.createElement("div"); item.className="item";
  let lastPos=0; let sectionDetails=""; let doorHeight=h-2.5;

  dividers.forEach((d,i)=>{
    let sectionWidth = d.position-lastPos-(i>0?2.7:0);
    let doorWidth = (d.doors===1)?sectionWidth-3:(sectionWidth-4)/2;
    sectionDetails += `ุงูููุทุน ${i+1}: ุนุฑุถ ${sectionWidth.toFixed(1)} ร ุงุฑุชูุงุน ${doorHeight.toFixed(1)} ุณู โ ${d.doors} ุจุงุจ(ุฃุจูุงุจ) โ ุฃุจุนุงุฏ ุงููููุงููู ููู ุจุงุจ: ุนุฑุถ ${(doorWidth-11).toFixed(1)} ร ุงุฑุชูุงุน ${(doorHeight-11).toFixed(1)} ุณู โ ูุตุงูุงุช 2 / ูุฏ 1 โ 4 ุฒูุงูุง ููู ุจุงุจ<br>`;
    lastPos=d.position;
  });

  let remainingWidth = w-lastPos-(dividers.length>0?2.7:0);
  let lastDoorWidth = (lastDoors===1)?remainingWidth-3:(remainingWidth-4)/2;
  sectionDetails += `ุงูููุทุน ${dividers.length+1}: ุนุฑุถ ${remainingWidth.toFixed(1)} ร ุงุฑุชูุงุน ${doorHeight.toFixed(1)} ุณู โ ${lastDoors} ุจุงุจ(ุฃุจูุงุจ) โ ุฃุจุนุงุฏ ุงููููุงููู ููู ุจุงุจ: ุนุฑุถ ${(lastDoorWidth-11).toFixed(1)} ร ุงุฑุชูุงุน ${(doorHeight-11).toFixed(1)} ุณู โ ูุตุงูุงุช 2 / ูุฏ 1 โ 4 ุฒูุงูุง ููู ุจุงุจ<br>`;

  let totalDoors = dividers.reduce((sum,d)=>sum+d.doors,0)+lastDoors;
  let summary="ุนุฏุฏ ุงูููุงุทุน: "+dividers.length+" โ ";
  summary+="ูุณุงูุงุช ุงูููุงุทุน: ["+dividers.map(d=>d.position).join(", ")+"] โ ";
  summary+="ุนุฏุฏ ุฃุจูุงุจ ูู ููุทุน: ["+dividers.map(d=>d.doors).join(",")+","+lastDoors+"] โ ";
  summary+="ููุฎุต ุงูุฃุฏูุงุช: ุงูุฃุจูุงุจ "+totalDoors+" โ ูุตุงูุงุช "+(totalDoors*2)+" โ ุงูุฃูุฏู "+totalDoors+" โ ุงูุฒูุงูุง "+(totalDoors*4);

  item.innerHTML=`
    <h4>๐ช ุญูู ุณููู</h4>
    ุงูุฃุจุนุงุฏ: ุนุฑุถ ${w} ร ุงุฑุชูุงุน ${h}<br>
    <b>ุชูุงุตูู ุงูููุงุทุน:</b><br>${sectionDetails}
    <div>${summary}</div>
  `;
  resultsDiv.appendChild(item);
  document.getElementById("dividerContainer").innerHTML=""; // ุฅุนุงุฏุฉ ุถุจุท ุงูููุงุทุน
}

// ุทุจุงุนุฉ ุงููุชุงุฆุฌ ููุท
function printResults(){
  let content=document.getElementById("results").innerHTML;
  let myWindow=window.open("","Print","width=800,height=600");
  myWindow.document.write("<html><head><title>ูุชุงุฆุฌ ุงูุทุจุงุนุฉ</title></head><body>"+content+"</body></html>");
  myWindow.document.close(); myWindow.print();
}
</script>
</body>
</html>
