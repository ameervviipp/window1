<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>حساب الخزائن والحلق</title>
<style>
body { font-family: "Tahoma", sans-serif; direction: rtl; margin: 20px; }
h2 { color: #333; }
.container { display: flex; gap: 20px; }
.section { border: 1px solid #aaa; padding: 15px; border-radius: 8px; width: 48%; }
label { display: block; margin-top: 10px; }
input { width: 100px; margin-top: 5px; }
button { margin-top: 15px; padding: 5px 15px; cursor: pointer; }
.results { margin-top: 20px; background: #f9f9f9; padding: 15px; border-radius: 8px; }
.item { margin-bottom: 15px; padding-bottom: 10px; border-bottom: 1px dashed #ccc; }
</style>
</head>
<body>

<h2>📐 برنامج حساب الخزائن والحلق</h2>

<div class="container">
  <!-- خزانة -->
  <div class="section">
    <h3>➕ إضافة خزانة</h3>
    <label>العرض (سم): <input type="number" id="cabWidth"></label>
    <label>الارتفاع (سم): <input type="number" id="cabHeight"></label>
    <label>العمق (سم): <input type="number" id="cabDepth"></label>
    <label>عدد الأبواب:
      <select id="cabDoors">
        <option value="1">باب واحد</option>
        <option value="2">بابان</option>
      </select>
    </label>
    <button onclick="addCabinet()">إضافة خزانة</button>
  </div>

  <!-- حلق -->
  <div class="section">
    <h3>➕ إضافة حلق سفلي</h3>
    <label>العرض (سم): <input type="number" id="frameWidth"></label>
    <label>الارتفاع (سم): <input type="number" id="frameHeight"></label>
    <label>عدد القواطع: <input type="number" id="dividerCount" value="0"></label>
    <button onclick="addFrame()">إضافة حلق</button>
  </div>
</div>

<div class="results" id="results">
  <h3>📊 النتائج:</h3>
</div>

<!-- أزرار الملخص والطباعة -->
<div style="margin-top: 15px;">
  <button onclick="showSummary()">📝 عرض الملخص النهائي</button>
  <button onclick="window.print()">🖨️ طباعة النتائج</button>
</div>

<script>
let resultsDiv = document.getElementById("results");

// تخزين الملخص النهائي
let summary = {doors:0, hinges:0, handles:0, corners:0};

// إضافة خزانة
function addCabinet() {
  let wMain = parseFloat(document.getElementById("cabWidth").value);
  let hMain = parseFloat(document.getElementById("cabHeight").value);
  let dMain = parseFloat(document.getElementById("cabDepth").value);
  let doors = parseInt(document.getElementById("cabDoors").value);

  if (wMain<=0 || hMain<=0 || dMain<=0){ alert("❌ أدخل قياسات صحيحة للخزانة"); return; }

  let w = wMain - 5, h = hMain -5, d = dMain -5; // بعد خصم للبروفيلات
  let doorDetails = "", cabCorners=0;
  if(doors===1){
    let doorW = wMain -3, doorH = hMain -2.5;
    doorDetails = `باب واحد: ${doorW} × ${doorH} سم — فصالات 2 / يد 1 — عدد كل قياس: عرض 2 / ارتفاع 2`;
    summary.doors+=1; summary.hinges+=2; summary.handles+=1; cabCorners=4;
  } else {
    let doorW = (wMain -4)/2, doorH = hMain -2.5;
    doorDetails = `بابان: لكل باب ${doorW} × ${doorH} سم — فصالات 2 / يد 1 لكل باب — عدد كل قياس: عرض 4 / ارتفاع 4`;
    summary.doors+=2; summary.hinges+=4; summary.handles+=2; cabCorners=8;
  }
  summary.corners+=cabCorners;

  let profiles = `
    <b>تفاصيل البروفيلات:</b><br>
    - ارتفاع: 2 × ${h} (بسنين) + 2 × ${h} (بسن واحد)<br>
    - عرض: 2 × ${w} (بسنين) + 2 × ${w} (بسن واحد)<br>
    - عمق: 4 × ${d} (بسنين)<br>
  `;

  let item = document.createElement("div");
  item.className = "item";
  item.innerHTML = `
    <h4>🗄️ خزانة</h4>
    الأبعاد بعد الخصم: عرض ${w} × ارتفاع ${h} × عمق ${d}<br>
    ${profiles}
    <b>تفاصيل الأبواب:</b><br> ${doorDetails}<br>
    عدد الزوايا: ${cabCorners}
  `;
  resultsDiv.appendChild(item);
}

// إضافة حلق
function addFrame() {
  let w = parseFloat(document.getElementById("frameWidth").value);
  let h = parseFloat(document.getElementById("frameHeight").value);
  let divCount = parseInt(document.getElementById("dividerCount").value);
  if (w<=0 || h<=0){ alert("❌ أدخل قياسات صحيحة للحلق"); return; }

  let sectionWidth = (w - divCount*5)/(divCount+1); // خصم 5 سم لكل قاطع
  let doorHeight = h -2.5;

  let doorDetails = "";
  for(let i=1;i<=divCount+1;i++){
    doorDetails+=`المقطع ${i}: باب واحد ${sectionWidth} × ${doorHeight} سم — فصالات 2 / يد 1 — عدد كل قياس: عرض 2 / ارتفاع 2 — 4 زوايا<br>`;
    summary.doors+=1; summary.hinges+=2; summary.handles+=1; summary.corners+=4;
  }

  let item = document.createElement("div");
  item.className="item";
  item.innerHTML=`
    <h4>🚪 حلق سفلي</h4>
    الأبعاد: عرض ${w} × ارتفاع ${h}<br>
    <b>تفاصيل الأبواب:</b><br>${doorDetails}
  `;
  resultsDiv.appendChild(item);
}

// زر الملخص النهائي
function showSummary() {
  let summaryDiv = document.createElement("div");
  summaryDiv.className="item";
  summaryDiv.innerHTML=`
    <h4>📦 الملخص النهائي</h4>
    مجموع الأبواب: ${summary.doors}<br>
    مجموع الفصالات: ${summary.hinges}<br>
    مجموع الأيدي: ${summary.handles}<br>
    مجموع الزوايا: ${summary.corners}
  `;
  resultsDiv.appendChild(summaryDiv);
}
</script>

</body>
</html>
