<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ø®Ø²Ø§Ø¦Ù† ÙˆØ§Ù„Ø­Ù„Ù‚ Ø§Ù„Ø³ÙÙ„ÙŠ</title>
<style>
body { font-family: "Tahoma", sans-serif; direction: rtl; margin: 20px; }
h2 { color: #333; }
.container { display: flex; gap: 20px; }
.section { border: 1px solid #aaa; padding: 15px; border-radius: 8px; width: 48%; }
label { display: block; margin-top: 10px; }
input, select { margin-top: 5px; width: 100px; }
button { margin-top: 15px; padding: 5px 15px; cursor: pointer; }
.results { margin-top: 20px; background: #f9f9f9; padding: 15px; border-radius: 8px; }
.item { margin-bottom: 15px; padding-bottom: 10px; border-bottom: 1px dashed #ccc; }
.divider-row { display:flex; gap:5px; margin-top:5px; align-items:center;}
</style>
</head>
<body>

<h2>ğŸ“ Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø­Ø³Ø§Ø¨ Ø§Ù„Ø®Ø²Ø§Ø¦Ù† ÙˆØ§Ù„Ø­Ù„Ù‚ Ø§Ù„Ø³ÙÙ„ÙŠ</h2>

<div class="container">
  <div class="section">
    <h3>â• Ø¥Ø¶Ø§ÙØ© Ø®Ø²Ø§Ù†Ø©</h3>
    <label>Ø§Ù„Ø¹Ø±Ø¶ (Ø³Ù…): <input type="number" id="cabWidth"></label>
    <label>Ø§Ù„Ø§Ø±ØªÙØ§Ø¹ (Ø³Ù…): <input type="number" id="cabHeight"></label>
    <label>Ø§Ù„Ø¹Ù…Ù‚ (Ø³Ù…): <input type="number" id="cabDepth"></label>
    <label>Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø¨ÙˆØ§Ø¨:
      <select id="cabDoors">
        <option value="1">Ø¨Ø§Ø¨ ÙˆØ§Ø­Ø¯</option>
        <option value="2">Ø¨Ø§Ø¨Ø§Ù†</option>
      </select>
    </label>
    <button onclick="addCabinet()">Ø¥Ø¶Ø§ÙØ© Ø®Ø²Ø§Ù†Ø©</button>
  </div>

  <div class="section">
    <h3>â• Ø¥Ø¶Ø§ÙØ© Ø­Ù„Ù‚ Ø³ÙÙ„ÙŠ</h3>
    <label>Ø§Ù„Ø¹Ø±Ø¶ (Ø³Ù…): <input type="number" id="frameWidth"></label>
    <label>Ø§Ù„Ø§Ø±ØªÙØ§Ø¹ (Ø³Ù…): <input type="number" id="frameHeight"></label>
    <div id="dividerContainer"></div>
    <label>Ø¹Ø¯Ø¯ Ø£Ø¨ÙˆØ§Ø¨ Ø§Ù„Ù…Ù‚Ø·Ø¹ Ø§Ù„Ø£Ø®ÙŠØ±: 
      <select id="lastSegmentDoors">
        <option value="1">1 Ø¨Ø§Ø¨</option>
        <option value="2">2 Ø¨Ø§Ø¨</option>
      </select>
    </label>
    <button onclick="addDividerRow()">â• Ø¥Ø¶Ø§ÙØ© Ù‚Ø§Ø·Ø¹</button>
    <button onclick="addFrame()">Ø¥Ø¶Ø§ÙØ© Ø­Ù„Ù‚</button>
  </div>
</div>

<div class="results" id="results">
<h3>ğŸ“Š Ø§Ù„Ù†ØªØ§Ø¦Ø¬:</h3>
</div>

<button onclick="printResults()">ğŸ–¨ï¸ Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ù†ØªØ§Ø¦Ø¬</button>

<script>
let resultsDiv = document.getElementById("results");

// Ø§Ù„Ø®Ø²Ø§Ø¦Ù†
function addCabinet() {
  let wMain = parseFloat(document.getElementById("cabWidth").value);
  let hMain = parseFloat(document.getElementById("cabHeight").value);
  let dMain = parseFloat(document.getElementById("cabDepth").value);
  let doors = parseInt(document.getElementById("cabDoors").value);

  if(wMain<=0||hMain<=0||dMain<=0){ alert("âŒ Ø£Ø¯Ø®Ù„ Ù‚ÙŠØ§Ø³Ø§Øª ØµØ­ÙŠØ­Ø© Ù„Ù„Ø®Ø²Ø§Ù†Ø©"); return; }

  let w = wMain-5, h = hMain-5, d = dMain-5;
  let item=document.createElement("div"); item.className="item";

  let doorHeight = (doors===1)?hMain-2.5:hMain-2.5;
  let doorWidth = (doors===1)?wMain-3:(wMain-4)/2;
  let doorCount=(doors===1)?2:4;
  let hinges = doorCount*2;
  let handles = doorCount;
  let angles = doorCount*4;
  let doorDesc = (doors===1)?
    `Ø¨Ø§Ø¨ ÙˆØ§Ø­Ø¯: ${doorWidth} Ã— ${doorHeight} Ø³Ù… â€” ÙØµØ§Ù„Ø§Øª 2 / ÙŠØ¯ 1 â€” Ø¹Ø¯Ø¯ ÙƒÙ„ Ù‚ÙŠØ§Ø³: Ø¹Ø±Ø¶ ${doorCount} Ã— Ø§Ø±ØªÙØ§Ø¹ ${doorCount}`:
    `Ø¨Ø§Ø¨Ø§Ù†: ${doorWidth} Ã— ${doorHeight} Ø³Ù… Ù„ÙƒÙ„ Ø¨Ø§Ø¨ â€” ÙØµØ§Ù„Ø§Øª 2 / ÙŠØ¯ 1 Ù„ÙƒÙ„ Ø¨Ø§Ø¨ â€” Ø¹Ø¯Ø¯ ÙƒÙ„ Ù‚ÙŠØ§Ø³: Ø¹Ø±Ø¶ 4 Ã— Ø§Ø±ØªÙØ§Ø¹ 4`;

  item.innerHTML = `
    <h4>ğŸ—„ï¸ Ø®Ø²Ø§Ù†Ø©</h4>
    Ø§Ù„Ø£Ø¨Ø¹Ø§Ø¯ Ø¨Ø¹Ø¯ Ø®ØµÙ… Ø§Ù„Ø¨Ø±ÙˆÙÙŠÙ„Ø§Øª: Ø¹Ø±Ø¶ ${w} Ã— Ø§Ø±ØªÙØ§Ø¹ ${h} Ã— Ø¹Ù…Ù‚ ${d}<br>
    <b>ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø¨Ø±ÙˆÙÙŠÙ„Ø§Øª:</b><br>
    - Ø§Ø±ØªÙØ§Ø¹: 2 Ã— ${h} Ø³Ù… (Ø¨Ø³Ù†ÙŠÙ†) + 2 Ã— ${h} Ø³Ù… (Ø¨Ø³Ù† ÙˆØ§Ø­Ø¯)<br>
    - Ø¹Ø±Ø¶: 2 Ã— ${w} Ø³Ù… (Ø¨Ø³Ù†ÙŠÙ†) + 2 Ã— ${w} Ø³Ù… (Ø¨Ø³Ù† ÙˆØ§Ø­Ø¯)<br>
    - Ø¹Ù…Ù‚: 4 Ã— ${d} Ø³Ù… (Ø¨Ø³Ù†ÙŠÙ†)<br>
    <b>ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø£Ø¨ÙˆØ§Ø¨:</b><br>${doorDesc}<br>
    <div>Ø¹Ø¯Ø¯ Ø§Ù„Ø²ÙˆØ§ÙŠØ§ Ù„ÙƒÙ„ Ø®Ø²Ø§Ù†Ø©: 8</div>
    <div>Ù…Ù„Ø®Øµ: Ø§Ù„Ø£Ø¨ÙˆØ§Ø¨ ${doorCount} â€” Ø§Ù„ÙØµØ§Ù„Ø§Øª ${hinges} â€” Ø§Ù„Ø£ÙŠØ¯ÙŠ ${handles} â€” Ø§Ù„Ø²ÙˆØ§ÙŠØ§ ${angles}</div>
  `;
  resultsDiv.appendChild(item);
}

// Ø§Ù„Ø­Ù„Ù‚Ø§Øª
function addDividerRow(){
  let container=document.getElementById("dividerContainer");
  let row=document.createElement("div"); row.className="divider-row";
  row.innerHTML=`
    <input type="number" placeholder="Ù…Ø³Ø§ÙØ© Ø§Ù„Ù‚Ø§Ø·Ø¹ Ù…Ù† Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©" class="divPos">
    <select class="divDoors">
      <option value="1">1 Ø¨Ø§Ø¨</option>
      <option value="2">2 Ø¨Ø§Ø¨</option>
    </select>
    <button onclick="this.parentElement.remove()">Ã— Ø­Ø°Ù</button>
  `;
  container.appendChild(row);
}

// Ø¥Ø¶Ø§ÙØ© Ø­Ù„Ù‚
function addFrame(){
  let w=parseFloat(document.getElementById("frameWidth").value);
  let h=parseFloat(document.getElementById("frameHeight").value);
  if(w<=0||h<=0){ alert("âŒ Ø£Ø¯Ø®Ù„ Ù‚ÙŠØ§Ø³Ø§Øª ØµØ­ÙŠØ­Ø©"); return; }

  let lastDoors = parseInt(document.getElementById("lastSegmentDoors").value);

  let rows=document.querySelectorAll(".divider-row");
  let dividers=[];
  rows.forEach(r=>{
    let pos=parseFloat(r.querySelector(".divPos").value);
    let doors=parseInt(r.querySelector(".divDoors").value);
    if(!isNaN(pos)&&pos>0) dividers.push({position:pos, doors:doors});
  });
  dividers.sort((a,b)=>a.position-b.position);

  let item=document.createElement("div"); item.className="item";
  let lastPos=0; let sectionDetails=""; let doorHeight=h-2.5;

  dividers.forEach((d,i)=>{
    let sectionWidth=d.position-lastPos-(i>0?2.7:0);
    let perDoorWidth = sectionWidth / d.doors;
    sectionDetails+=`Ø§Ù„Ù…Ù‚Ø·Ø¹ ${i+1}: Ø¹Ø±Ø¶ ${sectionWidth.toFixed(1)} Ø³Ù… Ã— Ø§Ø±ØªÙØ§Ø¹ ${doorHeight.toFixed(1)} Ø³Ù… â€” ${d.doors} Ø¨Ø§Ø¨(Ø£Ø¨ÙˆØ§Ø¨)<br>`;
    for(let j=0;j<d.doors;j++){
      sectionDetails+=`&nbsp;&nbsp;- Ø§Ù„Ø¨Ø§Ø¨ ${j+1}: Ø¹Ø±Ø¶ ${perDoorWidth.toFixed(1)} Ã— Ø§Ø±ØªÙØ§Ø¹ ${doorHeight.toFixed(1)} Ø³Ù…<br>`;
    }
    lastPos=d.position;
  });

  // Ø§Ù„Ù…Ù‚Ø·Ø¹ Ø§Ù„Ø£Ø®ÙŠØ± Ø¨Ø¹Ø¯ Ø¢Ø®Ø± Ù‚Ø§Ø·Ø¹
  let remainingWidth=w-lastPos-(dividers.length>0?2.7:0);
  let perDoorWidthLast = remainingWidth / lastDoors;
  sectionDetails+=`Ø§Ù„Ù…Ù‚Ø·Ø¹ ${dividers.length+1}: Ø¹Ø±Ø¶ ${remainingWidth.toFixed(1)} Ø³Ù… Ã— Ø§Ø±ØªÙØ§Ø¹ ${doorHeight.toFixed(1)} Ø³Ù… â€” ${lastDoors} Ø¨Ø§Ø¨(Ø£Ø¨ÙˆØ§Ø¨)<br>`;
  for(let j=0;j<lastDoors;j++){
    sectionDetails+=`&nbsp;&nbsp;- Ø§Ù„Ø¨Ø§Ø¨ ${j+1}: Ø¹Ø±Ø¶ ${perDoorWidthLast.toFixed(1)} Ã— Ø§Ø±ØªÙØ§Ø¹ ${doorHeight.toFixed(1)} Ø³Ù…<br>`;
  }

  // Ù…Ù„Ø®Øµ Ø§Ù„Ù‚ÙˆØ§Ø·Ø¹
  let summary="Ø¹Ø¯Ø¯ Ø§Ù„Ù‚ÙˆØ§Ø·Ø¹: "+dividers.length+" â€” ";
  summary+="Ù…Ø³Ø§ÙØ§Øª Ø§Ù„Ù‚ÙˆØ§Ø·Ø¹: ["+dividers.map(d=>d.position).join(", ")+"] â€” ";
  summary+="Ø¹Ø¯Ø¯ Ø£Ø¨ÙˆØ§Ø¨ ÙƒÙ„ Ù…Ù‚Ø·Ø¹: ["+dividers.map(d=>d.doors).join(", ")+", "+lastDoors+"]";

  item.innerHTML=`
    <h4>ğŸšª Ø­Ù„Ù‚ Ø³ÙÙ„ÙŠ</h4>
    Ø§Ù„Ø£Ø¨Ø¹Ø§Ø¯: Ø¹Ø±Ø¶ ${w} Ã— Ø§Ø±ØªÙØ§Ø¹ ${h}<br>
    <b>ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ù‚Ø§Ø·Ø¹:</b><br>${sectionDetails}
    <div>${summary}</div>
  `;
  resultsDiv.appendChild(item);
  document.getElementById("dividerContainer").innerHTML=""; // Ø¥Ø¹Ø§Ø¯Ø© Ø¶Ø¨Ø· Ø§Ù„Ù‚ÙˆØ§Ø·Ø¹
}

// Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ù†ØªØ§Ø¦Ø¬ ÙÙ‚Ø·
function printResults(){
  let content=document.getElementById("results").innerHTML;
  let myWindow=window.open("","Print","width=800,height=600");
  myWindow.document.write("<html><head><title>Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø·Ø¨Ø§Ø¹Ø©</title></head><body>"+content+"</body></html>");
  myWindow.document.close(); myWindow.print();
}
</script>
</body>
</html>

